\chapter{Arhitektura i dizajn sustava}
		
		\textbf{\textit{dio 1. revizije}}\\



               \textit{Arhitektura sustava može se podijeliti  na tri podsustava: }

              \begin{packed_item}
               \item  Web  preglednik
                \item   Web aplikacija
                \item    Baza Podataka

                \end{packed_item}

                 \begin{figure}[H]
                     \includegraphics[width=7cm, height=5cm ]{./slike/arhitektura.png}
                      \centering
                      \caption{Arhitektura sustava}
                  \end{figure}


                  \textbf{Web preglednik} je aplikacija za prikaz web stranica. Kada korisnik posjeti neku web stranicu, internetski preglednik zatraži podatke
                                 sa web poslužitelja, koje interpretira i prikaže na zaslon računala ili nekog drugog pametnog uređaja.

                  \textbf{Web poslužitelj} osnovni podsustav u izradi web aplikacije. Njegova uloga u sustavu je komunikacija korisnika(web preglednika) s 
                                 aplikacijom. Komunikacija se ostvaruje preko HTTP (engl. Hyper Text Transfer Protocol) protokola. Uloga HTTP protokola je prijenos 
                                 sadržaja s poslužitelja na preglednik, koji dalje odrađuje svoj posao.
                            
                                Korisnik preko preglednika, koristi korisničko sučelje, te tako šalje HTTP zahtjeve na poslužitelj. Neki od zahtjeva su HTTP GET, HTTP POST 
                                itd. Svaki takav zahtjev u 99 \% slučajeva na poslužitelju izaziva, njegovu komunikaciju s \underbar{bazom podataka}.

                  \textbf{Baza podataka} je skup međusobno povezanih podataka, pohranjeni u vanjskoj memoriji računala. Njezina uloga u sustavu je brza i efikasna
                                 pohrana podataka, koji se propagiraju iz sloja web preglednika, preko web poslužitelja.

                  \textit{Web aplikacija se najčešće dijeli na dva dijela: }

                               \begin{packed_item}
              			 \item  \textbf{Front-end} koji je zadužen za razvoj korsicničkog iskustva na webu.
                		\item    \textbf{Back-end} koji je zadužen za obradu i spremanje podataka, koji dođu sa frontenda.

              		       \end{packed_item}

                                Tehnologije koje smo uzeli za razvoj web aplikacije su React.js za Front-end u razvojnom okruženju Microsoft Visual Studio Code, te .NET za Back-end u razvojnom okruženju Microsoft Visual Studio.
                                Uz .Net na back-endu, smo uzeli SQL server za bazu podataka. 
                                Arhitektura sustava će biti bazirana na MVC(engl. Model-View-Controller) konceptu.

                      \textbf{MVC} model sastoji se od tri komponenti: 
                                  
                               \begin{packed_item}
             			  \item \textbf{Model} -  komponenta modela koja je zadužena za dohvat i manipulacijom podataka. Često za obavljanje svojih zadaća koristi bazu podataka.
                		  \item  \textbf{View} -   komponenta kojoj je zadaća prikaz dobivenih podataka korisniku.
               		           \item  \textbf{Controller} - komponenta zadužena za primanje zahtjeva od korisnika, koje dalje propagira komponenti Model.

                                \end{packed_item}
                  
                    \begin{figure}[H]
                     \includegraphics[width=7cm, height=5cm ]{./slike/mvc.jpg}
                      \centering
                      \caption{MVC model}
                    \end{figure}
                    
                                 

			
		\section{Baza podataka}
			
			\textbf{\textit{dio 1. revizije}}\\
			
		\textit{Potrebno je opisati koju vrstu i implementaciju baze podataka ste odabrali, glavne komponente od kojih se sastoji i slično.}
		
			\subsection{Opis tablica}
			

				\textit{Svaku tablicu je potrebno opisati po zadanom predlošku. Lijevo se nalazi točno ime varijable u bazi podataka, u sredini se nalazi tip podataka, a desno se nalazi opis varijable. Svjetlozelenom bojom označite primarni ključ. Svjetlo plavom označite strani ključ}
				

\textbf{Users} Ovaj entitet sadrži sve važne informacije o korisniku aplikacije. Sadrži atribute: korisničko ime, OIB, ime, prezime, fotografiju, broj telefona, adresu elektroničke pošte, lozinku, ID uloge korisnika te status je li potvrđen. Ovaj entitet u vezi je \textit{Many-to-One} s entitetom Role preko atributa identifikatora uloge, u vezi \textit{One-To-Many} s entitetom Operation preko atributa identifikatora osobe i u vezi \textit{One-to-Many} s entitetom Comment preko atributa identifikatora osobe. 
				
				\begin{longtblr}[
					label=none,
					entry=none
					]{
						width = \textwidth,
						colspec={|X[6,l]|X[6, l]|X[20, l]|}, 
						rowhead = 1,
					} %definicija širine tablice, širine stupaca, poravnanje i broja redaka naslova tablice
					\hline \multicolumn{3}{|c|}{\textbf{Users}}	 \\ \hline[3pt]
					Username & VARCHAR	&  	korisničko ime korisnika  	\\ \hline
					\SetCell{LightGreen}OIB	& BIGINT & jedinstveni identifikator osobe   	\\ \hline 
					FirstName & VARCHAR & ime korisnika  \\ \hline 
					LastName & VARCHAR	& prezime korisnika 		\\ \hline 
				    PhoneNumber & VARCHAR & telefonski broj korisnika  	\\ \hline 
					EMail & VARCHAR & adresa elektroničke pošte korisnika  	\\ \hline
					Password & VARCHAR & hash lozinke  	\\ \hline
                    \SetCell{LightBlue}RoleId & INT & identifikator uloge  	\\ \hline
                    Confirmed & BIT & status je li administrator potvrdio korisnika  	\\ \hline
				\end{longtblr}
				
\textbf{Role} Ovaj entitet sadrži sve važne informacije o ulogama korisnika aplikacije. Sadrži atribute ID uloge i ime uloge. Ovaj entitet u vezi je \textit{One-to-Many} s entitetom Users preko atributa identifikatora uloge. 
				\begin{longtblr}[
					label=none,
					entry=none
					]{
						width = \textwidth,
						colspec={|X[6,l]|X[6, l]|X[20, l]|}, 
						rowhead = 1,
					} %definicija širine tablice, širine stupaca, poravnanje i broja redaka naslova tablice
					\hline \multicolumn{3}{|c|}{\textbf{Role}}	 \\ \hline[3pt]
					\SetCell{LightGreen}Id & INT	&  jedinstveni identifikator uloge  	\\ \hline
					Name	& VARCHAR &  naziv uloge 	\\ \hline
				\end{longtblr}
\textbf{Missing Report} Ovaj entitet sadrži sve važne informacije o prijavama nestalih osoba. Sadrži atribute: ID prijave, ime osobe, prezime osobe, OIB osobe, fotografiju osobe i opis prijave. Ovaj entitet u vezi je \textit{One-to-Many} s entitetom Comment preko atributa identifikatora prijave nestale osobe.  
				\begin{longtblr}[
					label=none,
					entry=none
					]{
						width = \textwidth,
						colspec={|X[6,l]|X[6, l]|X[20, l]|}, 
						rowhead = 1,
					} %definicija širine tablice, širine stupaca, poravnanje i broja redaka naslova tablice
					\hline \multicolumn{3}{|c|}{\textbf{Missing Report}}	 \\ \hline[3pt]
					\SetCell{LightGreen}Id & INT	&  jedinstveni identifikator prijave nestale osobe  	\\ \hline
					FirstName	& VARCHAR &  ime nestale osobe 	\\ \hline
                    LastName	& VARCHAR &  prezime nestale osobe 	\\ \hline
                    OIB	& BIGINT &  jedinstveni identifikator nestale osobe 	\\ \hline
                    Photo	& VARCHAR &  fotografija nestale osobe 	\\ \hline
                    Description	& VARCHAR &  opis prijave nestale osobe 	\\ \hline
                   
				\end{longtblr}
                \textbf{Comment} Ovaj entitet sadrži sve važne informacije o komentarima prijava nestalih osoba. Sadrži atribute ID komentara, ID prijave koja se komentira, sadržaj komentara, OIB korisnika. Ovaj entitet u vezi je \textit{Many-to-One} s entitetom Missing Report preko atributa identifikatora prijave nestale osobe i u vezi \textit{Many-to-One} s entitetom Users preko atributa identifikatora osobe. 
				\begin{longtblr}[
					label=none,
					entry=none
					]{
						width = \textwidth,
						colspec={|X[6,l]|X[6, l]|X[20, l]|}, 
						rowhead = 1,
					} %definicija širine tablice, širine stupaca, poravnanje i broja redaka naslova tablice
					\hline \multicolumn{3}{|c|}{\textbf{Comment}}	 \\ \hline[3pt]
					\SetCell{LightGreen}Id & INT	&  jedinstveni identifikator komentara  	\\ \hline
					\SetCell{LightBlue}ReportId	& INT &  jedinstveni identifikator prijave nestale osobe 	\\ \hline
                    Text & VARCHAR &  sadržaj komentara 	\\ \hline
                   \SetCell{LightBlue} UserOIB	& BIGINT &  jedinstveni identifikator osobe koja komentira 	\\ \hline
				\end{longtblr}
\textbf{Operation} Ovaj entitet sadrži sve važne informacije o operacijama. Sadrži atribute: ID operacije, status operacije i OIB voditelja operacije. Ovaj entitet u vezi je \textit{Many-to-One} s entitetom Users preko atributa identifikatora osobe. 
				\begin{longtblr}[
					label=none,
					entry=none
					]{
						width = \textwidth,
						colspec={|X[6,l]|X[6, l]|X[20, l]|}, 
						rowhead = 1,
					} %definicija širine tablice, širine stupaca, poravnanje i broja redaka naslova tablice
					\hline \multicolumn{3}{|c|}{\textbf{Operation}}	 \\ \hline[3pt]
					\SetCell{LightGreen}Id & INT	&  jedinstveni identifikator operacije\\ \hline
					Status	& VARCHAR &  status operacije 	\\ \hline
                    \SetCell{LightBlue}LeaderOIB	& BIGINT & jedinstveni identifikator voditelja operacije 	\\ \hline
                    
				\end{longtblr}
                
            
				
				
			
			\subsection{Dijagram baze podataka}
				\textit{ U ovom potpoglavlju potrebno je umetnuti dijagram baze podataka. Primarni i strani ključevi moraju biti označeni, a tablice povezane. Bazu podataka je potrebno normalizirati. Podsjetite se kolegija "Baze podataka".}
			
			\eject
			
			
		\section{Dijagram razreda}
		
			\textit{Potrebno je priložiti dijagram razreda s pripadajućim opisom. Zbog preglednosti je moguće dijagram razlomiti na više njih, ali moraju biti grupirani prema sličnim razinama apstrakcije i srodnim funkcionalnostima.}\\
			
			\textbf{\textit{dio 1. revizije}}\\
			
			\textit{Prilikom prve predaje projekta, potrebno je priložiti potpuno razrađen dijagram razreda vezan uz \textbf{generičku funkcionalnost} sustava. Ostale funkcionalnosti trebaju biti idejno razrađene u dijagramu sa sljedećim komponentama: nazivi razreda, nazivi metoda i vrste pristupa metodama (npr. javni, zaštićeni), nazivi atributa razreda, veze i odnosi između razreda.}\\
			
			\textbf{\textit{dio 2. revizije}}\\			
			
			\textit{Prilikom druge predaje projekta dijagram razreda i opisi moraju odgovarati stvarnom stanju implementacije}
			
			
			
			\eject
		
		\section{Dijagram stanja}
			
			
			\textbf{\textit{dio 2. revizije}}\\
			
			\textit{Potrebno je priložiti dijagram stanja i opisati ga. Dovoljan je jedan dijagram stanja koji prikazuje \textbf{značajan dio funkcionalnosti} sustava. Na primjer, stanja korisničkog sučelja i tijek korištenja neke ključne funkcionalnosti jesu značajan dio sustava, a registracija i prijava nisu. }
			
			
			\eject 
		
		\section{Dijagram aktivnosti}
			
			\textbf{\textit{dio 2. revizije}}\\
			
			 \textit{Potrebno je priložiti dijagram aktivnosti s pripadajućim opisom. Dijagram aktivnosti treba prikazivati značajan dio sustava.}
			
			\eject
		\section{Dijagram komponenti}
		
			\textbf{\textit{dio 2. revizije}}\\
		
			 \textit{Potrebno je priložiti dijagram komponenti s pripadajućim opisom. Dijagram komponenti treba prikazivati strukturu cijele aplikacije.}
